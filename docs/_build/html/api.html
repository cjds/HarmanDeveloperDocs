<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API Documentation &mdash; Harman Developer 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Harman Developer 1.0 documentation" href="index.html" />
    <link rel="next" title="HKWHub App - Making your Omni speakers connected from any devices (sensors) or services" href="hkwhub-spec.html" />
    <link rel="prev" title="Architecture Overview" href="architecture-overview.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="hkwhub-spec.html" title="HKWHub App - Making your Omni speakers connected from any devices (sensors) or services"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="architecture-overview.html" title="Architecture Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Harman Developer 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api-documentation">
<span id="smartapp-ref"></span><h1>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h2>
<p>The following methods should be defined by all SmartApps. They are called by the SmartThings platform at various points in the SmartApp lifecycle.</p>
<div class="section" id="initializehkwirelesscontroller">
<h3>initializeHKWirelessController()<a class="headerlink" href="#initializehkwirelesscontroller" title="Permalink to this headline">¶</a></h3>
<p>Initializes and starts HKWirelessHD controller. This API requires a license key as string. If the input license key fails in key validation, then the API returns -1 as result. If it is successful, return 0.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This is a blocking call, and it will not return until the caller successfully initializes HKWireless controller. If the phone is not connected to a Wi-Fi network, or any other app on the same phone is using the HKWireless controller, it waits until the app releases the controller.</p>
<p class="last">If you needs non-blocking behavior, you should call this API asynchronously using other thread.</p>
</div>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(NSInteger)</span> <span class="pre">initializeHKWirelessController:(NSString*)licenseKey;</span></code></dd>
<dt><strong>Parameters:</strong></dt>
<dd><code class="docutils literal"><span class="pre">(NSString*)</span> <span class="pre">licenseKey</span></code> - a string containing the license key</dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">NSInteger</span></code> - an integer indicating success (0 or HKW_INIT_SUCCESS) or failure (-1 or HKW_INIT_FAILURE_LICENSE_INVALID)</dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="isinitialized">
<h3>isInitialized()<a class="headerlink" href="#isinitialized" title="Permalink to this headline">¶</a></h3>
<p>Checks if HKWirelessHD controller is already initialied.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)</span> <span class="pre">isInitialized;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">BOOL</span></code> - boolean value indicating if HKWirelessController has been initialized or not.</dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="initializing">
<h3>initializing()<a class="headerlink" href="#initializing" title="Permalink to this headline">¶</a></h3>
<p>Checks if HKWirelessHD controller is being initialied.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)</span> <span class="pre">initializing;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">BOOL</span></code> - boolean value indicating if HKWirelessController is being initialized</dd>
</dl>
</div>
</div>
<div class="section" id="refreshing-speaker-information">
<h2>Refreshing Speaker Information<a class="headerlink" href="#refreshing-speaker-information" title="Permalink to this headline">¶</a></h2>
<div class="section" id="refreshdeviceinfoonce">
<h3>refreshDeviceInfoOnce()<a class="headerlink" href="#refreshdeviceinfoonce" title="Permalink to this headline">¶</a></h3>
<p>Refreshes the device status only one time. The device information will be refreshed and updated in DeviceInfo objects. If there is any updates on DeviceInfo objects, then DeviceStateUpdated callback defined by registerCallbackDeviceStateUpdated will be called.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(void)</span> <span class="pre">refreshDeviceInfoOnce;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">void</span></code></dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="startrefreshdeviceinfo">
<h3>startRefreshDeviceInfo()<a class="headerlink" href="#startrefreshdeviceinfo" title="Permalink to this headline">¶</a></h3>
<p>Starts to refresh devices every two seconds. It continues until stopRefreshDeviceInfo(). The result of refreshing device info is the same as described in refreshDeviceInfoOnce().</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(void)</span> <span class="pre">startRefreshDeviceInfo;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">void</span></code></dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="stoprefreshdeviceinfo">
<h3>stopRefreshDeviceInfo()<a class="headerlink" href="#stoprefreshdeviceinfo" title="Permalink to this headline">¶</a></h3>
<p>Stops refreshing devices, which was initiated by startRefreshDeviceInfo().</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(void)</span> <span class="pre">stopRefreshDeviceInfo;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">void</span></code></dd>
</dl>
</div>
</div>
<hr class="docutils" />
<div class="section" id="playback-control">
<h2>Playback Control<a class="headerlink" href="#playback-control" title="Permalink to this headline">¶</a></h2>
<div class="section" id="playcaf">
<h3>playCAF()<a class="headerlink" href="#playcaf" title="Permalink to this headline">¶</a></h3>
<p>Plays a CAF audio file. CAF includes MP3 and WAV. PlaybackStateChanged callback will return the status, EPlayerState_Play.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)</span> <span class="pre">playCAF:(NSURL</span> <span class="pre">*)assetURL</span> <span class="pre">songName:(NSString*)songName</span> <span class="pre">resumeFlag:(BOOL)resumeFlag;</span></code></dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">(NSURL*)</span> <span class="pre">assetURL</span></code> - NSURL to the audio file</li>
<li><code class="docutils literal"><span class="pre">(NSString*)</span> <span class="pre">songName</span></code> -  the song name to be played. The soneName is used internally to save a temporary PCM file convered from the original audio file</li>
<li><code class="docutils literal"><span class="pre">(BOOL)</span> <span class="pre">resumeFlag</span></code> -  a boolean that specifies if the play resume from the point that paused or stopped in the previous playback. When starting a song from the beginning, resumeFlag must be false.</li>
</ul>
<dl class="docutils">
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">BOOL</span></code> - boolean value indicating success or failure</dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="playcaffromcertaintime">
<h3>playCAFFromCertainTime()<a class="headerlink" href="#playcaffromcertaintime" title="Permalink to this headline">¶</a></h3>
<p>Plays a CAF audio file from a certain time. CAF includes mp3, wav, and m4a. Differently from <code class="docutils literal"><span class="pre">playCAF()</span></code>, this function allows to play a song from a certain time, specifyed by startTime (second). PlaybackStateChanged callback will return the status, EPlayerState_Play.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)</span> <span class="pre">playCAFFromCertainTime:(NSURL</span> <span class="pre">*)assetURL</span> <span class="pre">songName:(NSString*)songName</span> <span class="pre">startTime:(NSInteger)startTime;</span></code></dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">(NSURL</span> <span class="pre">*)assetURL</span></code> - NSURL to the audio file.</li>
<li><code class="docutils literal"><span class="pre">(NSString*)songName</span></code> - the song name to be played. This information is used internally to save a temporary PCM file converted from the original audio file.</li>
<li><a href="#id1"><span class="problematic" id="id2">``</span></a>(NSInteger)startTime - time in second that specifies the start time.</li>
</ul>
<dl class="docutils">
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">BOOL</span></code> - boolean value indicating success or failure</dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="playwav">
<h3>playWAV()<a class="headerlink" href="#playwav" title="Permalink to this headline">¶</a></h3>
<p>Plays a WAV file. PlaybackStateChanged callback will return the status, EPlayerState_Play.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(BOOL)</span> <span class="pre">playWAV:(NSString*)wavPath;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">BOOL</span></code> - boolean value indicating success or failure</dd>
</dl>
</div>
<div class="section" id="playstreamingmedia">
<h3>playStreamingMedia()<a class="headerlink" href="#playstreamingmedia" title="Permalink to this headline">¶</a></h3>
<p>Plays a streaming media. Note that when you stop playing the streaming music, you must use stop(), not pause().</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(void)playStreamingMedia:(NSString</span> <span class="pre">*)streamingMediaUrl</span> <span class="pre">withCallback:(void</span> <span class="pre">(^)(bool</span> <span class="pre">result))completedCallback;</span></code></dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">(NSString*)streamingMediaUrl</span></code> - a string that specifies the URL of the streaming media source. It starts with a protocol name, such as &#8220;<a class="reference external" href="http://">http://</a>&#8221; or &#8220;rtps://&#8221;. Currently, http, rtps, and mms are supported. The supported file format is mp3, m4a, wav.</li>
<li><code class="docutils literal"><span class="pre">(void</span> <span class="pre">(^)(bool</span> <span class="pre">result))completedCallback</span></code> - a callback that returns the result of the playback</li>
</ul>
<dl class="docutils">
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">void</span></code></dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="pause">
<h3>pause()<a class="headerlink" href="#pause" title="Permalink to this headline">¶</a></h3>
<p>Pauses the current playback. PlaybackStateChanged callback will return the status, EPlayerState_Pause.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(void)</span> <span class="pre">pause;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">void</span></code></dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="stop">
<h3>stop()<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h3>
<p>Stops the current playback. PlaybackStateChanged callback will return the status, EPlayerState_Stop.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(void)</span> <span class="pre">stop;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">void</span></code></dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="isplaying">
<h3>isPlaying()<a class="headerlink" href="#isplaying" title="Permalink to this headline">¶</a></h3>
<p>Inquires whether an audio file is being played or not.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(bool)</span> <span class="pre">isPlaying;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">BOOL</span></code> - boolean value indicating if the audio is being played or now.</dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="getplayerstate">
<h3>getPlayerState()<a class="headerlink" href="#getplayerstate" title="Permalink to this headline">¶</a></h3>
<p>Inquires the current state of playback.</p>
<dl class="docutils">
<dt><strong>Signature:</strong></dt>
<dd><code class="docutils literal"><span class="pre">-</span> <span class="pre">(HKPlayerState)getPlayerState;</span></code></dd>
<dt><strong>Returns:</strong></dt>
<dd><code class="docutils literal"><span class="pre">HKPlayState</span></code> - indicates the current player state.</dd>
</dl>
<hr class="docutils" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/HarmanDeveloperLogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API Documentation</a><ul>
<li><a class="reference internal" href="#initialization">Initialization</a><ul>
<li><a class="reference internal" href="#initializehkwirelesscontroller">initializeHKWirelessController()</a></li>
<li><a class="reference internal" href="#isinitialized">isInitialized()</a></li>
<li><a class="reference internal" href="#initializing">initializing()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#refreshing-speaker-information">Refreshing Speaker Information</a><ul>
<li><a class="reference internal" href="#refreshdeviceinfoonce">refreshDeviceInfoOnce()</a></li>
<li><a class="reference internal" href="#startrefreshdeviceinfo">startRefreshDeviceInfo()</a></li>
<li><a class="reference internal" href="#stoprefreshdeviceinfo">stopRefreshDeviceInfo()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#playback-control">Playback Control</a><ul>
<li><a class="reference internal" href="#playcaf">playCAF()</a></li>
<li><a class="reference internal" href="#playcaffromcertaintime">playCAFFromCertainTime()</a></li>
<li><a class="reference internal" href="#playwav">playWAV()</a></li>
<li><a class="reference internal" href="#playstreamingmedia">playStreamingMedia()</a></li>
<li><a class="reference internal" href="#pause">pause()</a></li>
<li><a class="reference internal" href="#stop">stop()</a></li>
<li><a class="reference internal" href="#isplaying">isPlaying()</a></li>
<li><a class="reference internal" href="#getplayerstate">getPlayerState()</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="architecture-overview.html"
                        title="previous chapter">Architecture Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="hkwhub-spec.html"
                        title="next chapter">HKWHub App - Making your Omni speakers connected from any devices (sensors) or services</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="hkwhub-spec.html" title="HKWHub App - Making your Omni speakers connected from any devices (sensors) or services"
             >next</a> |</li>
        <li class="right" >
          <a href="architecture-overview.html" title="Architecture Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Harman Developer 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Harman International.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>